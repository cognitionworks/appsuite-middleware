feature_name: Mail Filter
properties:
    - key: com.openexchange.mail.filter.loginType
      description: |
        Specifies which sieve server should be used. Two options are allowed here:
        user : use the imap server setting stored for user in the database
        global : use the sieve server given in com.openexchange.mail.filter.server for all users.
      defaultValue: user
      version:
      reloadable: true
      configcascadeAware: true
      related: com.openexchange.mail.filter.server
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.credentialSource
      description: |
        Specifies which sieve credentials should be use. Four options are allowed here:
        "session" : login name and password are used from the current session.
        "session-full-login" : full login (incl. context part) name and password are used from the current session.
        "imapLogin" : the login name is taken from the field imapLogin of the current
                      user the password is taken from the current session.
        "mail" : use the primary mail address of the user and the password from the session.
      defaultValue: session
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.server
      description: |
        Specifies a default value for the sieve server.
      defaultValue: localhost
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "Host", "SIEVE"]
    - key: com.openexchange.mail.filter.port
      description: |
        Specifies the SIEVE port
        -----------------------------------------------------------
        NOTE: 2000 is the deprecated port number for SIEVE (now assigned to some Cisco SCCP protocol by the IANA)
              4190 is the new one used with most recent Linux and IMAP implementations.
        Please check your system's default port defined at /etc/services.
        -----------------------------------------------------------
      defaultValue: 4190
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "Port", "SIEVE"]
    - key: com.openexchange.mail.filter.scriptName
      description: |
        Specifies the name of the script, which will be generated.
        Note that the mail filter bundle will leave the old script with the old
        script name behind, and doesn't delete it.
      defaultValue: Open-Xchange
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.authenticationEncoding
      description: |
        Define the charset encoding to use for authentication to sieve server.
      defaultValue: UTF-8
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.nonRFCCompliantTLSRegex
      description: |
        Define the regex which recognizes servers with incorrect sieve TLS implementation.
      defaultValue: "^Cyrus.*v([0-1]\\.[0-9].*|2\\.[0-2].*|2\\.3\\.[0-9]|2\\.3\\.[0-9][^0-9].*)$"
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.tls
      description: |
        Whether to use TLS if available.
      defaultValue: true
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE", "Security"]
    - key: com.openexchange.mail.filter.vacationDomains
      description: |
        Specifies if a vacation messages should only be sent to specific domains.
        If multiple domains are given, they should be separated by ","
        e.g. com.openexchange.mail.filter.vacationDomains=testdomain.com,example.com
      defaultValue:
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.connectionTimeout
      description: |
        Specifies when the connection should time out (value in milliseconds).
      defaultValue: 30000
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE", "Timeout"]
    - key: com.openexchange.mail.filter.authTimeout
      description: |
        Specifies when the connection should time out (value in milliseconds) when performing SASL authentication against Sieve end-point.
      defaultValue: 6000
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE", "Timeout"]
    - key: com.openexchange.mail.filter.passwordSource
      description: |
        Set the password source; meaning which source is taken to determine a user's password to login into mail filter system. 
        If 'session' is set, then user's individual system's password is taken. 
        If 'global' is set, then the value specified through property 'com.openexchange.mail.filter.masterPassword' is taken.
        Currently known values: session and global
      defaultValue: session
      version:
      reloadable: true
      configcascadeAware: true
      related: com.openexchange.mail.filter.masterPassword
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.masterPassword
      description: |
        The master password for mail/transport server. Only takes effect when property
        "com.openexchange.mail.filter.passwordSource" is set to "global".
      defaultValue:
      version:
      reloadable: true
      configcascadeAware: true
      related: com.openexchange.mail.filter.passwordSource
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE", "Credential"]
    - key: com.openexchange.mail.filter.useUTF7FolderEncoding
      description: |
        This property defines if mailbox names shall be UTF-7 encoded as specified in RFC2060; section 5.1.3. "Mailbox International Naming Convention".
        If set to "false" no UTF-7 encoding is performed.

        Set to "true" for those Cyrus IMAP server versions that do NOT support "sieve_utf8fileinto" property (e.g. lower than v2.3.11)
        Set to "true" for those Cyrus IMAP server versions that support "sieve_utf8fileinto" property having that property set to "0".
        Thus moving mails with the 'fileinto' command will properly work for mailbox names that contain non-ascii characters.
      defaultValue: false
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.punycode
      description: |
        Enable punycode encoding for the username used in authentication against the managesieve server.
      defaultValue: false
      version:
      reloadable: true
      configcascadeAware: true
      related: 
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.useSIEVEResponseCodes
      description: |
        Interpret SIEVE Response Codes, see https://tools.ietf.org/html/rfc5804#section-1.3
        In most cases, this option must be kept to false.
      defaultValue: false
      version:
      reloadable: true
      configcascadeAware: true
      related:
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]
    - key: com.openexchange.mail.filter.redirectWhitelist
      description: |
        Specifies a comma-separated list of domains (wild-card syntax supported) that are allowed for redirect rules.
      defaultValue:
      version:
      reloadable: true
      configcascadeAware: true
      related:
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE", "White List"]
    - key: com.openexchange.mail.filter.preferredSaslMech
      description: |
        Specifies the preferred SASL authentication mechanism.
        An empty value falls-back to "PLAIN"
        
        Known values: GSSAPI, XOAUTH2, OAUTHBEARER
      defaultValue:
      version:
      reloadable: true
      configcascadeAware: true
      related:
      file: mailfilter.properties
      tags: ["Mail Filter", "Mail", "SIEVE"]