--- !com.openexchange.subscribe.crawler.CrawlerDescription
displayName: web.de
id: com.openexchange.subscribe.crawler.webde
workflowString: |
  --- !com.openexchange.subscribe.crawler.Workflow
  steps: 
    - !com.openexchange.subscribe.crawler.LoginPageByFormActionStep
      actionOfLoginForm: "https://login.web.de/intern/login/"
      baseUrl: ""
      linkAvailableAfterLogin: "(\\/online\\/.*)"
      nameOfPasswordField: password
      nameOfUserField: username
      numberOfForm: 2
      pageTitleAfterLogin: "(\\/online\\/.*)"
      password: ""
      url: "http://web.de/fm/"
      username: ""
    - !com.openexchange.subscribe.crawler.ConditionalPageByLinkRegexStep
      url: "(/online/frame.*)"
    - !com.openexchange.subscribe.crawler.PageByLinkRegexStep
      url: "/online/[^h]+.*"
    - !com.openexchange.subscribe.crawler.PageByLinkRegexStep
      url: "/online/adressbuch/.*"
    - !com.openexchange.subscribe.crawler.PageByLinkRegexStep
      url: "/online/adressbuch/.*"
    - !com.openexchange.subscribe.crawler.AnchorsByLinkRegexStep
      linkRegex: "adr_show.*"
      resultpageLinks: []
      subpageLinkRegex: ""
      subpages: []
      subpagesHref: []
    - !com.openexchange.subscribe.crawler.ContactObjectsByHTMLAnchorsAndPagePartSequenceStep
      pageParts: !com.openexchange.subscribe.crawler.PagePartSequence
        page: ""
        pageParts: 
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(width=\"282\"><b>)([a-zA-Z\\säöüß-]*)(<)"
            type: 1
            typeOfInfo: display_name
          - !com.openexchange.subscribe.crawler.PagePart
            regex: E\-Mail\-Adressen
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Privat</b></td><td class=\"b\" width=\"277\"><a href=[^>]*>)([a-z@A-Z0-9\\.\\-\\{\\}\\#\\|\\^\\$\\*\\+\\?\\'\\/!%&=_`~]*)(<)"
            type: 1
            typeOfInfo: email2
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Büro</b></td><td class=\"b\" width=\"277\"><a href=[^>]*>)([a-z@A-Z0-9\\.\\-\\{\\}\\#\\|\\^\\$\\*\\+\\?\\'\\/!%&=_`~]*)(<)"
            type: 1
            typeOfInfo: email1
          - !com.openexchange.subscribe.crawler.PagePart
            regex: Telefonnummern
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Privat<\\/b><\\/td><td class=\"b\" width=\"277\">)([0-9\\s\\+\\-\\/]*)(<)"
            type: 1
            typeOfInfo: telephone_home1
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Mobil<\\/b><\\/td><td class=\"b\" width=\"277\">[^>]*>)([0-9\\s\\+\\-\\/]*)(<)"
            type: 1
            typeOfInfo: cellular_telephone1
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Büro<\\/b><\\/td><td class=\"b\" width=\"277\">)([0-9\\s\\+\\-\\/]*)(<)"
            type: 1
            typeOfInfo: telephone_business1
          - !com.openexchange.subscribe.crawler.PagePart
            regex: Adressen
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Privat<\\/b><\\/td><td class=\"b\" width=\"507\">)([^<]*)(<br)"
            type: 1
            typeOfInfo: street_home
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(>)([0-9]*)()"
            type: 1
            typeOfInfo: postal_code_home
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "()([a-zA-Zäöü]*)(<br)"
            type: 1
            typeOfInfo: city_home
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(>)([a-zA-Zäöü]*)(<\\/td>)"
            type: 1
            typeOfInfo: country_home
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(<b>Büro<\\/b><\\/td><td class=\"b\" width=\"507\">)([^<]*)(<br)"
            type: 1
            typeOfInfo: street_business
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(>)([0-9]*)()"
            type: 1
            typeOfInfo: postal_code_business
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "()([a-zA-Zäöü]*)(<br)"
            type: 1
            typeOfInfo: city_business
          - !com.openexchange.subscribe.crawler.PagePart
            regex: "(>)([a-zA-Zäöü]*)(<\\/td>)"
            type: 1
            typeOfInfo: country_business
  useThreadedRefreshHandler: true
  
