We're going to create a folder with different permissions for two users, a task in that folder and then try to modify and delete it using a user with restricted rights. 

!include CommonSetup

First, define a set of permissions. We are going to make the first user a typical owner. The second user can contribute, but may not delete anything there.

!|Table:DefinePermissions|
|Both|
|thorben | folder_admin, read_admin, write_admin, delete_admin |
|marcus  | see_folder, read_admin, write_all |

Next, we create a folder with those permissions. Since we did not say anything about who creates the folder, it will be the first user, as defined in CommonSetup.

!|Table:CreateFolder|
|editable by both   |
|parent    | module | permissions |
|public    | tasks  | Both        |

Then we create a task in the folder that is editable by both.

!|Table:CreateTask|
|MyTask|
|title | folder           |
|MyTask| editable by both |

Now we change the user.

!|Table:SwitchUser|
|marcus|

We update the task. We're allowed to do so, right?

!|Table:UpdateTask|
|MyTask     |
|title      |
|UpdatedTask|

But we may not delete. So the following attempt is going to fail:

!|Table:DeleteTask|
|MyTask           |
| expectedError   |
| TSK-0014        |

Last but not least, we clean up the mess we made:

!include CommonTearDown
