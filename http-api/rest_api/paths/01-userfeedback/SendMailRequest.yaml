/userfeedback/v1/mail/{context-group}/{type}:
  post:
    operationId: mail
    tags:
      - Userfeedback
    summary: Exports user feedback and sends exported data to provided recipients
    parameters:
      -
        name: context-group
        in: path
        description: The context group identifying the global DB where the feedback is stored.
        required: true
        type: string
        default: default
      -
        name: type
        in: path
        description: The feedback type to send.
        required: true
        type: string
        default: star-rating-v1
      - 
        name: start
        in: query
        description: Start time in seconds since 1970-01-01 00:00:00 UTC. Only feedback given after this time is sent. If not set, all feedback up to -e is sent.
        required: false
        type: integer
        format: int64
      - 
        name: end
        in: query
        description: End time in seconds since 1970-01-01 00:00:00 UTC. Only feedback given before this time is sent. If not set, all feedback since -s is sent.
        required: false
        type: integer
        format: int64
      - 
        name: subject
        in: query
        description: "The mail subject. Default: User Feedback Report: [time range]"
        required: false
        type: string
      - 
        name: body
        in: query
        description: The mail body (plain text).
        required: false
        type: string
      - 
        name: recipients
        in: formData
        description: JSON Array containing address, display name and PGP key (if available) for every recipient.
        required: true
        type: string
    responses:
      200:
        description: Blank in case of success, error message from server in case of error.
      400:
        description: Bad request, response contains error message.
      401:
        description: Not authorized
      404:
        description: Not found, if path is wrong (unknown context group or feedback type). Response contains error message.
      500:
        description: Internal server error that might have multiple reasons, for instance no configured global database. Response contains error message.

    x-ox-examples:
      Example:
        description: Export user feedback from 2016-01-01 to 2016-12-31 and send it via mail to user1@example.org and user2@example.org
        example: >
                 POST http://localhost:8009/userfeedback/v1/mail/default/star-rating-v1?start=1451606400&end=1483228799
                 [
                   {"address":"user1@example.org",
                    "displayName":"User 1",
                    "pgpKey":"-----BEGIN PGP PUBLIC KEY BLOCK-----\r\nVersion: BCPG v1.56...."},
                   {"address":"user2@example.org",
                    "displayName":"User 2",
                    "pgpKey":"-----BEGIN PGP PUBLIC KEY BLOCK-----\r\nVersion: BCPG v1.56...."}
                 ]