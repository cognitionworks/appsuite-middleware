<?xml version="1.0" encoding="UTF-8"?>
<project name="MobileWebApp Backend Configuration" basedir=".">

    <description>
        Build the mobile web application configuration for the backend.
    </description>

    <!-- customizable values -->
    <property name="destDir" value=""/>
    <property name="prefix" value="/opt/open-xchange"/>

    <target name="installConf">
        <copy todir="${destDir}/${prefix}/etc" overwrite="true">
            <fileset dir="conf" includes="**"/>
        </copy>
    </target>

    <target name="build">
        <fail message="You have to define the build type." unless="buildType"/>
        <antcall target="${buildType}"/>
    </target>

    <target name="dist" description="Target to copy bundle for a build on the build service.">
        <property name="destinationDir" value="${packageDir}/${projectName}"/>
        <mkdir dir="${destinationDir}"/>
        <if>
            <available file="build-project.xml" type="file"/>
            <then>
                <property name="excludeBuildScript" value="build-project.xml"/>
            </then>
            <else>
                <property name="excludeBuildScript" value="build.xml"/>
            </else>
        </if>
        <copy todir="${destinationDir}">
            <fileset dir="${basedir}">
                <exclude name="${excludeBuildScript}"/>
                <exclude name="${buildDir}"/>
                <exclude name="packaging/**"/>
            </fileset>
        </copy>
    </target>

    <target name="clean">
        <delete dir="${buildDir}"/>
    </target>
    
</project>
