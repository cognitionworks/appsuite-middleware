<?xml version="1.0" encoding="UTF-8" ?>

<schema name="cria4" version="1.1">

	<types>
		<fieldType name="uuid" class="solr.UUIDField" indexed="true" />

		<fieldType name="date" class="solr.DateField" omitNorms="true" />

		<fieldType name="boolean" class="solr.BoolField" omitNorms="true" />

		<fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true" />

		<fieldType name="long" class="solr.LongField" omitNorms="true" />

		<fieldType name="int" class="solr.IntField" omitNorms="true" />

		<fieldType name="float" class="solr.FloatField" omitNorms="true" />

		<fieldType name="text" class="solr.TextField" positionIncrementGap="100" omitNorms="false">
			<analyzer type="index">
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
			<analyzer type="query">
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.SynonymFilterFactory" synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
		</fieldType>

		<fieldType name="text_stemmed_en" class="solr.TextField" positionIncrementGap="100" omitNorms="false">
			<analyzer type="index">
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/english-stopwords.txt" />
				<filter class="solr.EnglishMinimalStemFilterFactory" protected="${confDir:/opt/open-xchange/solr/conf}/protwords.txt" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
			<analyzer type="query">
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.SynonymFilterFactory" synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/english-stopwords.txt" />
				<filter class="solr.EnglishMinimalStemFilterFactory" protected="${confDir:/opt/open-xchange/solr/conf}/protwords.txt" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
		</fieldType>
		<fieldType name="text_stemmed_de" class="solr.TextField" positionIncrementGap="100" omitNorms="false">
			<analyzer type="index">
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/german-stopwords.txt" />
				<filter class="solr.GermanStemFilterFactory" protected="${confDir:/opt/open-xchange/solr/conf}/protwords.txt" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
			<analyzer type="query">
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.SynonymFilterFactory" synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/german-stopwords.txt" />
				<filter class="solr.GermanStemFilterFactory" protected="${confDir:/opt/open-xchange/solr/conf}/protwords.txt" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
		</fieldType>
		<!-- <fieldType name="text_stemmed_fr" class="solr.TextField" positionIncrementGap="100"
			omitNorms="false"> <analyzer type="index"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.StopFilterFactory"
			ignoreCase="true" words="french-stopwords.txt"/> <filter class="solr.FrenchStemFilterFactory"
			protected="protwords.txt"/> <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
			</analyzer> <analyzer type="query"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.SynonymFilterFactory"
			synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true"
			/> <filter class="solr.StopFilterFactory" ignoreCase="true" words="french-stopwords.txt"/>
			<filter class="solr.FrenchStemFilterFactory" protected="protwords.txt"/>
			<filter class="solr.RemoveDuplicatesTokenFilterFactory"/> </analyzer> </fieldType> -->
		<!-- <fieldType name="text_stemmed_nl" class="solr.TextField" positionIncrementGap="100"
			omitNorms="false"> <analyzer type="index"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.StopFilterFactory"
			ignoreCase="true" words="dutch-stopwords.txt"/> <filter class="solr.DutchStemFilterFactory"
			protected="protwords.txt"/> <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
			</analyzer> <analyzer type="query"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.SynonymFilterFactory"
			synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true"
			/> <filter class="solr.StopFilterFactory" ignoreCase="true" words="dutch-stopwords.txt"/>
			<filter class="solr.DutchStemFilterFactory" protected="protwords.txt"/> <filter
			class="solr.RemoveDuplicatesTokenFilterFactory"/> </analyzer> </fieldType> -->
		<!-- <fieldType name="text_stemmed_sv" class="solr.TextField" positionIncrementGap="100"
			omitNorms="false"> <analyzer type="index"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.StopFilterFactory"
			ignoreCase="true" words="swedish-stopwords.txt"/> <filter class="solr.SwedishLightStemFilterFactory"
			protected="protwords.txt"/> <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
			</analyzer> <analyzer type="query"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.SynonymFilterFactory"
			synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true"
			/> <filter class="solr.StopFilterFactory" ignoreCase="true" words="swedish-stopwords.txt"/>
			<filter class="solr.SwedishLightStemFilterFactory" protected="protwords.txt"/>
			<filter class="solr.RemoveDuplicatesTokenFilterFactory"/> </analyzer> </fieldType> -->
		<!-- <fieldType name="text_stemmed_es" class="solr.TextField" positionIncrementGap="100"
			omitNorms="false"> <analyzer type="index"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.StopFilterFactory"
			ignoreCase="true" words="spanish-stopwords.txt"/> <filter class="solr.SpanishLightStemFilterFactory"
			protected="protwords.txt"/> <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
			</analyzer> <analyzer type="query"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.SynonymFilterFactory"
			synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true"
			/> <filter class="solr.StopFilterFactory" ignoreCase="true" words="spanish-stopwords.txt"/>
			<filter class="solr.SpanishLightStemFilterFactory" protected="protwords.txt"/>
			<filter class="solr.RemoveDuplicatesTokenFilterFactory"/> </analyzer> </fieldType> -->
		<!-- <fieldType name="text_stemmed_it" class="solr.TextField" positionIncrementGap="100"
			omitNorms="false"> <analyzer type="index"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.StopFilterFactory"
			ignoreCase="true" words="italian-stopwords.txt"/> <filter class="solr.ItalianLightStemFilterFactory"
			protected="protwords.txt"/> <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
			</analyzer> <analyzer type="query"> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
			<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
			catenateWords="0" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
			<filter class="solr.LowerCaseFilterFactory"/> <filter class="solr.SynonymFilterFactory"
			synonyms="${confDir:/opt/open-xchange/solr/conf}/synonyms.txt" ignoreCase="true" expand="true"
			/> <filter class="solr.StopFilterFactory" ignoreCase="true" words="spanish-stopwords.txt"/>
			<filter class="solr.ItalianLightStemFilterFactory" protected="protwords.txt"/>
			<filter class="solr.RemoveDuplicatesTokenFilterFactory"/> </analyzer> </fieldType> -->


		<!-- jane.doe@some.de -->
		<fieldType name="addr" class="solr.TextField">
			<analyzer>
				<tokenizer class="solr.PatternTokenizerFactory" pattern="@" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/domain-stopwords.txt" />


				<!-- http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters -->

				<!-- <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1"
					generateNumberParts="1"/> -->
			</analyzer>
		</fieldType>

		<fieldType name="url" class="solr.TextField" positionIncrementGap="100">
			<analyzer>
				<tokenizer class="solr.StandardTokenizerFactory" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
		</fieldType>

		<fieldType name="phoneticText" class="solr.TextField" positionIncrementGap="100">
			<analyzer>
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/german-stopwords.txt" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="1" catenateAll="0"
					splitOnCaseChange="1" />
				<filter class="solr.DoubleMetaphoneFilterFactory" inject="false" maxCodeLength="8" />
			</analyzer>
		</fieldType>

		<fieldType name="textSpell" class="solr.TextField" positionIncrementGap="100" multiValued="true">
			<analyzer>
				<tokenizer class="solr.StandardTokenizerFactory" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="${confDir:/opt/open-xchange/solr/conf}/german-stopwords.txt" />
				<filter class="solr.StandardFilterFactory" />
			</analyzer>
		</fieldType>

		<fieldType name="categories" class="solr.TextField" positionIncrementGap="100">
			<analyzer>
				<tokenizer class="solr.WhitespaceTokenizerFactory" />
				<filter class="solr.LowerCaseFilterFactory" />
				<filter class="solr.RemoveDuplicatesTokenFilterFactory" />
			</analyzer>
		</fieldType>

	</types>

	<fields>
		<!-- Common Fields -->
		<field name="uuid" type="string" stored="true" indexed="true" />
		<field name="timestamp" type="long" stored="true" indexed="true" />
		<field name="context" type="long" stored="true" indexed="true" />
		<field name="user" type="long" stored="true" indexed="true" />
		<field name="account" type="int" stored="true" indexed="true" />
		<field name="full_name" type="string" stored="true" indexed="true" />
		<field name="id" type="string" stored="true" indexed="true" />
		<field name="color_label" type="int" stored="true" indexed="true" />
		<field name="attachment" type="boolean" stored="true" indexed="true" />

		<!-- Long fields -->
		<field name="received_date" type="long" stored="true" indexed="true" />
		<field name="sent_date" type="long" stored="true" indexed="true" />
		<field name="size" type="long" stored="true" indexed="true" />

		<!-- Flags fields -->
		<field name="flag_answered" type="boolean" stored="true" indexed="true" />
		<field name="flag_deleted" type="boolean" stored="true" indexed="true" />
		<field name="flag_draft" type="boolean" stored="true" indexed="true" />
		<field name="flag_flagged" type="boolean" stored="true" indexed="true" />
		<field name="flag_recent" type="boolean" stored="true" indexed="true" />
		<field name="flag_seen" type="boolean" stored="true" indexed="true" />
		<field name="flag_user" type="boolean" stored="true" indexed="true" />
		<field name="flag_spam" type="boolean" stored="true" indexed="true" />
		<field name="flag_forwarded" type="boolean" stored="true" indexed="true" />
		<field name="flag_read_ack" type="boolean" stored="true" indexed="true" />

		<!-- User flag field -->
		<field name="user_flags" type="string" stored="true" indexed="true" multiValued="true" />

		<!-- Address Fields "Doe, Jane" jane.doe@somewhere.org -->
		<field name="from_personal" type="text" stored="false" indexed="true" multiValued="true" />
		<field name="from_addr" type="addr" stored="false" indexed="true" multiValued="true" />
		<field name="from_plain" type="string" stored="true" indexed="false" /> <!-- indexed true to use with facets -->

		<field name="sender_personal" type="text" stored="false" indexed="true" multiValued="true" />
		<field name="sender_addr" type="addr" stored="false" indexed="true" multiValued="true" />
		<field name="sender_plain" type="string" stored="true" indexed="false" />

		<field name="to_personal" type="text" stored="false" indexed="true" multiValued="true" />
		<field name="to_addr" type="addr" stored="false" indexed="true" multiValued="true" />
		<field name="to_plain" type="string" stored="true" indexed="false" />

		<field name="cc_personal" type="text" stored="false" indexed="true" multiValued="true" />
		<field name="cc_addr" type="addr" stored="false" indexed="true" multiValued="true" />
		<field name="cc_plain" type="string" stored="true" indexed="false" />

		<field name="bcc_personal" type="text" stored="false" indexed="true" multiValued="true" />
		<field name="bcc_addr" type="addr" stored="false" indexed="true" multiValued="true" />
		<field name="bcc_plain" type="string" stored="true" indexed="false" />

		<!-- Subject Field -->
		<field name="subject_plain" type="text" stored="true" indexed="false" />
		<field name="subject_en" type="text_stemmed_en" stored="false" indexed="true" />
		<field name="subject_de" type="text_stemmed_de" stored="false" indexed="true" />
		<!-- <field name="subject_fr" type="text_stemmed_fr" stored="true" indexed="true"/>
			<field name="subject_nl" type="text_stemmed_nl" stored="true" indexed="true"/>
			<field name="subject_sv" type="text_stemmed_sv" stored="true" indexed="true"/>
			<field name="subject_es" type="text_stemmed_es" stored="true" indexed="true"/>
			<field name="subject_it" type="text_stemmed_it" stored="true" indexed="true"/> -->

		<field name="content_flag" type="boolean" stored="false" indexed="true" />
		<field name="content_en" type="text_stemmed_en" stored="false" indexed="true" />
		<field name="content_de" type="text_stemmed_de" stored="false" indexed="true" />
		<!-- <field name="content_fr" type="text_stemmed_fr" stored="false" indexed="true"/>
			<field name="content_nl" type="text_stemmed_nl" stored="false" indexed="true"/>
			<field name="content_sv" type="text_stemmed_sv" stored="false" indexed="true"/>
			<field name="content_es" type="text_stemmed_es" stored="false" indexed="true"/>
			<field name="content_it" type="text_stemmed_it" stored="false" indexed="true"/> -->

	</fields>

	<uniqueKey>uuid</uniqueKey>
	<defaultSearchField>from_personal</defaultSearchField>
	<solrQueryParser defaultOperator="OR" />

	<!-- <copyField source="content" dest="phonCont"/> -->
	<!-- <copyField source="content" dest="spell"/> -->

</schema>
