define("io.ox/dev/ajaxDebug/callViews",function(){"use strict";function a(a,b){var c,d=this,e=$("<input>",{type:"text",placeholder:"module.action?param1=value&param2=value"}).css({width:"500px"}),f=$("<textarea>",{placeholder:"{ the: 'body', json: data }"}).css({width:"500px",height:"200px"}),g=$("<textarea>",{readonly:"readonly"}).css({width:"500px",height:"200px",marginTop:"10px"}).hide(),h=$("<button>").addClass("btn btn-primary").text("Send");a.append($("<div>").append(e),$("<div>").append(f)
,$("<div>").append(h),$("<div>").append(g)),this.draw=function(a){var b,c;this.id=a.id,e.focus(),b=a.query.module+"."+a.query.params.action,c="",_(a.query.params).each(function(a,b){b!=="action"&&b!=="session"&&(c=c+"&"+escape(b)+"="+escape(a))}),c.length>0&&(b+="?"+c.substring(1)),e.val(b),a.query.data?_.isString(a.query.data)?f.val(a.query.data):f.val(JSON.stringify(a.query.data,null,4)):f.val(""),g.busy().show(),console.log("entry",a),a.deferred.always(function(){g.val(JSON.stringify(a.response
,null,4)),g.idle()}),this.dirty=!1,e.css("border",""),f.css("border","")},c=/((\w|\/)+?)\.(\w+)(\?(.*))?/,this.getQuery=function(){var a,b={},d=e.val().match(c);d?(b.module=d[1],b.params={action:d[3]},a=d[5],a&&_(a.split("&")).each(function(a){var c=a.split("="),d=unescape(c[0]),e=unescape(c[1]);b.params[d]=e})):alert("Can't parse query: "+e.val()+". Please use the following format: module.action?param1=value1&param2=value2");if(f.val())try{b.data=(new Function("return "+f.val()))()}catch(g){b.data=
f.val()}return b};function i(a){var c,e;a.preventDefault(),c=d.getQuery(),e=b.perform(c),console.log("DRAW!",e),d.draw(e)}function j(){e.val().match(c)?e.css("border","green solid 1px"):e.css("border","red solid 1px");if(f.val())try{(new Function("return "+f.val()))(),f.css("border","green solid 1px")}catch(a){f.css("border","red solid 1px")}d.dirty=!0}h.click(i),e.change(j),f.change(j),b.on("entrychanged",function(a,b){b.id===d.id&&!d.dirty&&d.draw(b)})}return{CallView:a}})