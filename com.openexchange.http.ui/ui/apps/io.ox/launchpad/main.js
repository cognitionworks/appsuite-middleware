define("io.ox/launchpad/main",["io.ox/core/desktop","io.ox/core/api/apps","gettext!io.ox/core/launchpad","less!io.ox/launchpad/style.css"],function(a,b){var c,d=1e3,e=!0,f=_.template('<a href="#" class="app" tabindex="1" data-app-name="<%= id %>">'+'  <img src="<%= icon %>" class="icon" alt="">'+'  <div class="title ellipsis"><%= title %></div>'+"</a>"),g=_.once(function(){var a=ox.ui.screens.add("launchpad");c=$("<div>").addClass("abs").appendTo(a).scrollable().addClass("pad")}),h=function(a){return _
.chain(ox.ui.running).filter(function(b){var c=b.getName();return a!==undefined?c===a:c!==undefined}).map(function(a){var c=b.get(a.getName());return c.title=a.getTitle()||c.title||a.getWindowTitle()||a.getName(),{data:c,app:a}}).value()},i=function(a){a.preventDefault();var b=$(this),e,f=c.parent().parent(),g=b.offset(),i=f.offset(),j=$(this).clone().addClass("io-ox-app-clone").css({position:"absolute",top:g.top-i.top,left:g.left-i.left}).appendTo(f);f.focus(),(e=h(a.data.id)).length?e[0].app.launch
():(console.log("APP DATA: ",a,this),$.when(require([a.data.entryModule||a.data.id+"/main"]),c.fadeOut(d>>1)).done(function(b){if(a.data.launchArguments){var c=b.getApp();c.launch.apply(c,a.data.launchArguments)}else b.getApp().launch()}))},j=function(a){a.preventDefault(),require(["io.ox/applications/main"],function(a){a.getApp().launch()})},k=function(a){return $(f(a))},l=function(){c.parent().parent().find(".io-ox-app-clone").remove(),c.scrollTop(0).empty().hide()},m=function(){l();var a=$("<h1>"
).text("Running applications"),f=$("<div>").addClass("section"),g=$("<h1>").text("Your applications"),m=$("<div>").addClass("section"),n;n=h(),_(n).each(function(a){f.append(k(a.data).on("click",a.data,i))}),m.append($("<div>").addClass("manage-apps").append($("<a>",{href:"#",tabindex:"1"}).addClass("button default-action").text("Manage applications").on("click",j))),_(b.getInstalled()).each(function(a){m.append(k(a).on("click",a,i))}),n.length&&c.append(a,f),c.append(g,m).fadeIn(e?d:0),e=!1},n=function(
){ox.ui.screens.show("windowmanager")},o=function(){ox.ui.screens.current()!=="launchpad"&&(g(),m(),ox.ui.screens.show("launchpad"))};return"use strict",{show:o}})