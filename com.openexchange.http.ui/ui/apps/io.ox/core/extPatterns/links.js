define("io.ox/core/extPatterns/links",["io.ox/core/extensions","io.ox/core/collection","io.ox/core/extPatterns/actions"],function(a,b,c){var d=c.Action,e=function(a){_.extend(this,a);var b=this,d=function(a){a.preventDefault();var b=$(this),d=b.data("context"),e=b.data("ref");c.invoke(e,this,d,a)};this.draw=this.draw||function(c){this.append($("<a>",{href:"#",tabindex:"1","data-action":b.id}).addClass("io-ox-action-link").attr({"data-prio":a.prio||"lo","data-ref":b.ref}).data({ref:b.ref,context:c
}).click(d).text(String(b.label)))}},f=function(b,c){a.point(b).extend(new e(c))},g=function(a){_.extend(this,a);var b=this,d=function(a){a.preventDefault();var d=$(this),e=d.data("context"),f=d.data("ref");c.invoke(f,b,e)};this.draw=function(a){this.append($("<button>",{"data-action":b.id,tabIndex:b.tabIndex||""}).addClass(b.cssClasses||"btn").data({ref:b.ref,context:a}).click(d).text(String(b.label))).append("&nbsp;")}},h=function(a,b,d,e,f,g){return c.extPatterns.applyCollection(a,b,e,f).always
(function(a){var b=0;_(a).each(function(a){_.isFunction(a.draw)&&(a.draw.call(g?$("<li>").appendTo(d):d,e),_.isFunction(a.customize)&&a.customize.call(d.find("a"),e),b++)}),b===0&&d.addClass("empty")})},i=function(a){var c=_.extend(this,a);this.draw=function(a){var d=$.makeArray(arguments);h(c,new b(a),this,a,d)}},j=function(a){var b=$(this),c="data-toggle",d=b.parent().children('[data-prio="lo"]'),e=b.attr(c)==="more";d[e?"show":"hide"](),b.text(e?"Less":"More").attr(c,e?"less":"more")},k=function(
a){var c=_.extend(this,a);this.draw=function(a){var d=$.makeArray(arguments),e=$("<div>").addClass("io-ox-inline-links").appendTo(this),f=_.isArray(a)&&a.length>1;h(c,new b(a),e,a,d).done(function(){!f&&e.children().length>3&&(e.append($("<span>",{"data-toggle":"more"}).addClass("label io-ox-action-link").css({cursor:"pointer",marginLeft:"1.5em"}).click(j).text("More")),e.children('[data-prio="lo"]').hide())})}},l=0,m=function(a,c){var d=$.makeArray(arguments),e=$("<div>").addClass("dropdown").css
({display:"inline-block",zIndex:l=l>0?l-1:1e4}).appendTo(this),f=$("<a>",{href:"#"}).attr("data-toggle","dropdown").data("context",c).text(a.label+" ").append($("<b>").addClass("caret")).appendTo(e);f.addClass(a.classes),e.append($.txt("   "));var g=$("<ul>").addClass("dropdown-menu").appendTo(e);return h(a,new b(c),g,c,d,!0),f.dropdown(),e},n=function(a){var b=_.extend(this,a);this.draw=function(){return m.apply(this,[b].concat($.makeArray(arguments)))}},o=function(b,c){var d=c||{};d.ref=b+"/"+d
.id,a.point(b).extend(_.extend({ref:d.ref,draw:function(a){m.call(this,d,a)}},d))};return"use strict",{Action:d,Link:e,XLink:f,Button:g,ToolbarLinks:i,InlineLinks:k,DropdownLinks:n,Dropdown:o}})