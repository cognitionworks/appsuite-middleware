define("io.ox/core/lightbox",function(){var a=$("<div/>").addClass("abs io-ox-dialog-underlay"),b=$("<div/>").addClass("abs io-ox-lightbox-popup");"use strict";function c(c,d){var e,f={popup:b.clone().hide().appendTo("body"),underlay:a.clone().hide().appendTo("body")};d=d||{},c=c||{},c.getGhost||(c.getGhost=$.noop),c.buildPage||(c.buildPage=$.noop),this.show=function(){var a,b,e,g,h,i=$(c.getGhost()),j=$(c.buildPage()).hide(),k=j!==null&&!_.isUndefined(j);j=j||i||$("<div><h1>You forgot to implement #getGhost and #buildPage in the delegate for this lightbox</h1></div>"
),d.shrinkToFit?(a=j.width(),b=j.height()):(a=$(window).width()*.9,b=$(window).height()*.9),g=$(window).height()/2-b/2,e=$(window).width()/2-a/2,j.css({width:a,height:b}),i?(f.popup.css({width:i.width(),height:i.height(),top:i.offset().top,left:i.offset().left}),h=i.clone(),f.popup.append(h),f.popup.show(),f.popup.animate({width:a,height:b,top:g,left:e},{duration:500,complete:function(){k&&(f.popup.empty(),f.popup.append(j),j.show())}})):(f.popup.css({width:0,height:0,top:$(window).height()/2,left
:$(window).width()/2}),f.popup.show(),f.popup.append(j),f.popup.animate({width:a,height:b,top:g,left:e},1e3)),f.underlay.fadeIn()},this.hide=function(){f.underlay.fadeOut(),f.popup.fadeOut(function(){f.underlay.remove(),f.popup.remove()})},this.option=function(a,b){if(_.isObject(a)){d=_(d).extend(a);return}if(_.isString(a))if(_.isUndefined(a))return d[a];else return d[a]=b,this},e=this,f.popup.dblclick(function(){e.hide()}),f.underlay.click(function(){e.hide()})}return{Lightbox:c,createLightboxForElement
:function(a,b){var d;a=$(a),b=b||a,_.isFunction(b)||(d=$(b),b=function(){return d}),a.click(function(){(new c({getGhost:function(){return a},buildPage:b})).show()})}}})