define("io.ox/core/test/cacheSimpleCache",["io.ox/core/extensions","io.ox/core/cache"],function(a,b){var c=5e3,d="testkey",e="ABC";"use strict";function f(){var a=function(){return a.value};return a.value=!1,a.yep=function(){a.value=!0},a}a.point("test/suite").extend({id:"core-cache-simplecache",index:100,test:function(a){a.describe("Caching with SimpleCache",function(){var d=new b.SimpleCache("TEST_SimpleCache"),e=(new Date).getTime(),g=e-1e3,h=e+1e3,i="MySimpleCacheTestkey",k="Simple",l="ABC",m="DEF"
,n="GHI";a.it("clearing cache",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.clear().done(function(c){b.yep(),a.expect(c).not.toBeDefined()}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("getting not existing key",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.get("notexistent").done(function(c){b.yep(),a.expect(c).toBeNull()}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("adding data ",function(){var b=new f;a.waitsFor(b,"Could not get key"
,c),d.add(i,l,e).done(function(c){b.yep(),a.expect(c).toEqual(l)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("adding old data but it will not be stored",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.add(i,m,g).done(function(c){b.yep(),a.expect(c).toEqual(l)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("adding new data",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.add(i,n,h).done(function(c){b.yep(),a.expect(c).toEqual(n)}).
fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("checking key",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.get(i).done(function(c){b.yep(),a.expect(c).not.toBeNull()})}),a.it("getting timestamp for key",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.time(i).done(function(c){b.yep(),a.expect(c).toEqual(h)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("getting all keys",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.keys
().done(function(c){b.yep(),a.expect(c).toEqual([i])}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("grepping keys",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.grepKeys(k).done(function(c){b.yep(),a.expect(c).toEqual([i])}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("checking cache size",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.size().done(function(c){b.yep(),a.expect(c).toEqual(1)}).fail(function(c){b.yep(),a.expect(c).
not.toBeDefined()})}),a.it("getting all values",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.values().done(function(c){b.yep(),a.expect(c).toEqual([n])}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("remove by key",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.remove(i).done(function(){b.yep(),a.expect(!0).toBeTruthy()}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("checking cache size",function(){var b=new f;a.waitsFor(b,"Could not get key"
,c),d.size().done(function(c){b.yep(),a.expect(c).toEqual(0)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("adding data ",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.add(i,l,e).done(function(c){b.yep(),a.expect(c).toEqual(l)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("remove by key Array",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.remove([i]).done(function(){b.yep(),a.expect(!0).toBeTruthy()}).fail(function(c){b.yep(),a
.expect(c).not.toBeDefined()})}),a.it("checking cache size",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.size().done(function(c){b.yep(),a.expect(c).toEqual(0)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("adding data",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.add(i,l,e).done(function(c){b.yep(),a.expect(c).toEqual(l)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("grepRemove by key",function(){var b=new f;a.waitsFor(b,"Could not get key"
,c),d.grepRemove(k).done(function(){b.yep(),a.expect(!0).toBeTruthy()}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})}),a.it("checking cache size",function(){var b=new f;a.waitsFor(b,"Could not get key",c),d.size().done(function(c){b.yep(),a.expect(c).toEqual(0)}).fail(function(c){b.yep(),a.expect(c).not.toBeDefined()})})})}})})