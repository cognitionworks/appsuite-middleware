define("io.ox/core/tk/keys",["io.ox/core/event"],function(a){var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",37:"leftarrow",38:"uparrow",39:"rightarrow",40:"downarrow",46:"del"};"use strict";function c(a){return b[a]||String.fromCharCode(a)||String(a)}function d(b){var d=new a,e=!1;b||(b=$(window));function f(a){var b,e=[];a.shiftKey&&e.push("shift"),(a.metaKey||a.ctrlKey)&&e.push("ctrl"),e.push(c(a.which)),b=_.chain(e).invoke("toLowerCase").sort().join("+").value(),d.trigger(b,a)}this
.include=function(){if(e)return;return e=!0,b.on("keydown",f),this},this.remove=function(){if(!e)return;return e=!1,b.off("keydown",f),this};function g(a){return _.chain(a.split(/[ +]+/)).invoke("toLowerCase").sort().join("+").value()}this.on=function(a,b){if(!a)throw new Error("Please specify a key expression");return d.on(g(a),b),this},this.off=function(a,b){return d.off(g(a),b),this},this.destroy=function(){this.remove(),d.destroy()}}return d})