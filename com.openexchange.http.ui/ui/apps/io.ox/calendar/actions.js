define("io.ox/calendar/actions",["io.ox/core/extensions","io.ox/core/extPatterns/links","io.ox/calendar/api","gettext!io.ox/calendar/actions"],function(a,b,c,d){var e=b.Action,f=b.XLink,g=b.Dropdown;"use strict",new e("io.ox/calendar/actions/switch-to-list-view",{requires:!0,action:function(a){require(["io.ox/calendar/list/perspective"],function(b){b.show(a)})}}),new e("io.ox/calendar/actions/switch-to-month-view",{requires:!0,action:function(a){require(["io.ox/calendar/month/perspective"],function(
b){b.show(a)})}}),new e("io.ox/calendar/detail/actions/edit",{id:"edit",requires:"one modify",action:function(a){var b={id:a.id,folder:a.folder_id};_.isUndefined(a.recurrence_position)||(b.recurrence_position=a.recurrence_position),c.get(b).done(function(a){require(["io.ox/calendar/edit/main"],function(b){a.recurrence_type>0?require(["io.ox/core/tk/dialogs"],function(c){(new c.ModalDialog).text(d("Do you want to edit the whole series or just one appointment within the series?")).addPrimaryButton("series"
,d("Series")).addButton("appointment",d("Appointment")).addButton("cancel",d("Cancel")).show().done(function(c){if(c==="cancel")return;c==="series"&&delete a.recurrence_position,b.getApp().launch().done(function(){this.edit(a)})})}):b.getApp().launch().done(function(){this.edit(a)})})}).fail(function(){console.log("NOT FOUND")})}}),new e("io.ox/calendar/detail/actions/delete",{id:"edit",requires:"one modify",action:function(a){var b={id:a.id,folder:a.folder_id};_.isUndefined(a.recurrence_position
)||(b.recurrence_position=a.recurrence_position),c.get(b).done(function(a){require(["io.ox/calendar/edit/model-appointment"],function(b){var c=new b(a);a.recurrence_type>0?require(["io.ox/core/tk/dialogs"],function(b){(new b.ModalDialog).text(d("Do you want to delete the whole series or just one appointment within the series?")).addButton("cancel",d("Cancel")).addDangerButton("appointment",d("Delete appointment")).addDangerButton("series",d("Delete whole series")).show().done(function(b){if(b==="cancel"
)return;b==="series"&&delete a.recurrence_position,c.destroy()})}):require(["io.ox/core/tk/dialogs"],function(a){(new a.ModalDialog).text(d("Do you want to delete this appointment?")).addButton("cancel",d("Cancel")).addDangerButton("ok",d("Delete")).show().done(function(a){if(a==="cancel")return;c.destroy()})})})}).fail(function(a){console.log(a)})}}),new e("io.ox/calendar/detail/actions/create",{id:"create",requires:"one create",action:function(a){require(["io.ox/calendar/edit/main"],function(b)
{console.log("create"),b.getApp().launch().done(function(){this.on("save",function(b,c){console.log("create save",arguments,a.getGrid()),a.getGrid().selection.set(c)}),this.create({folder_id:a.folder.get(),participants:[]})})})}}),new f("io.ox/calendar/links/toolbar",{index:100,id:"create",label:d("Create"),ref:"io.ox/calendar/detail/actions/create"}),new g("io.ox/calendar/links/toolbar",{id:"view",index:200,label:d("View")}),new f("io.ox/calendar/links/toolbar/view",{id:"list",index:100,label:d("List"
),ref:"io.ox/calendar/actions/switch-to-list-view"}),new f("io.ox/calendar/links/toolbar/view",{id:"month",index:200,label:d("Month"),ref:"io.ox/calendar/actions/switch-to-month-view"}),a.point("io.ox/calendar/detail/actions").extend(new b.InlineLinks({index:100,id:"inline-links",ref:"io.ox/calendar/links/inline"})),a.point("io.ox/calendar/links/inline").extend(new b.Link({index:100,prio:"hi",id:"edit",label:d("Edit"),ref:"io.ox/calendar/detail/actions/edit"})),a.point("io.ox/calendar/links/inline"
).extend(new b.Link({index:100,prio:"hi",id:"delete",label:d("Delete"),ref:"io.ox/calendar/detail/actions/delete"})),window.ext=a})