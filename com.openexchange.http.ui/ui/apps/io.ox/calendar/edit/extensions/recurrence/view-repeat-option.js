define("io.ox/calendar/edit/extensions/recurrence/view-repeat-option",["io.ox/calendar/util","text!io.ox/calendar/edit/extensions/recurrence/tpl/repeat-option.html","gettext!io.ox/calendar/edit/main"],function(a,b,c){var d={REPEAT:c("Repeat"),EDIT:c("edit")},e=Backbone.View.extend({RECURRENCE_NONE:0,tagName:"div",events:{"click .editrecurrence":"toggleRecurrence","change input.repeat":"onToggleRepeat"},initialize:function(c){var d=this;d.parentview=c.parentview,d.template=doT.template(b),d._modelBinder=new 
Backbone.ModelBinder;var e=function(b,c,d,e){console.log("update text:"+b);if(b==="ModelToView"){var f=a.getRecurrenceString(e.attributes);return console.log("text"+f),console.log(e.attributes),f?": "+f:""}else return e.get(d)};d.bindings={recurrence_type:[{selector:"[name=repeat]",converter:function(a,b,c,e){if(a==="ModelToView"){if(b===d.RECURRENCE_NONE)return!1;return!0}else{if(b===!1)return d.RECURRENCE_NONE;return e.get(c)}}},{selector:"[name=recurrenceText]",converter:e}],day_in_month:{selector
:"[name=recurrenceText]",converter:e},interval:{selector:"[name=recurrenceText]",converter:e},days:{selector:"[name=recurrenceText]",converter:e},month:{selector:"[name=recurrenceText]",converter:e}}},render:function(){var a=this;return a.$el.empty().append(a.template({strings:d,uid:_.uniqueId("io_ox_calendar_edit_")})),a._modelBinder.bind(a.model,a.el,a.bindings),a},toggleRecurrence:function(){var a=this,b=a.parentview.$(".recurrence");b.is(":visible")?(a.$(".editrecurrence").text(c("edit")),b.hide
()):(a.$(".editrecurrence").text(c("hide")),b.show()),this.$(".recurrence").toggle()},onToggleRepeat:function(a){var b=this,c=$(a.target).attr("checked")==="checked";c?(b.$(".editrecurrence_wrapper").show(),b.model.get("recurrence_type")===0&&b.model.set("recurrence_type",1)):(b.$(".editrecurrence_wrapper").hide(),b.model.set("recurrence_type",0),b.parentview.$(".recurrence").hide())}});return"use strict",e})