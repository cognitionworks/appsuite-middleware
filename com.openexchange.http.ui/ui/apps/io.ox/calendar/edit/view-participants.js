define("io.ox/calendar/edit/view-participants",["io.ox/core/extensions","io.ox/calendar/edit/view-participant"],function(a,b){var c=Backbone.View.extend({tagName:"div",className:"edit-appointment-participants",events:{"click .person-link":"onClickPersonLink","click .remove":"onClickRemove"},initialize:function(a){var c=this;c._participantViews=[],c.collection.on("reset",_.bind(c.render,c)),c.collection.on("add",_.bind(c.onAdd,c)),c.collection.on("remove",_.bind(c.onRemove,c)),c.collection.each(function(
a){c._participantViews.push(new b({model:a}))})},render:function(){var a=this;return a.list=$("<ul>"),a.$el.empty().append(a.list),_(a._participantViews).each(function(b){a.list.append(b.render().el)}),a},onAdd:function(a){var c=this,d=new b({model:a});c._participantViews.push(d),c.list.append(d.render().el)},onRemove:function(a,b,c){var d=this;d.$el.find("[data-cid="+a.cid+"]").remove()},onClickRemove:function(a){var b=this,c=$(a.target).parents(".edit-appointment-participant").get(0),d=$(c).attr
("data-cid");b.collection.remove(b.collection.getByCid(d))},onClickPersonLink:function(b){var c=this,d=$(b.target).parents(".edit-appointment-participant").get(0),e=$(d).attr("data-cid"),f=c.collection.getByCid(e);b.data={id:f.get("id"),email1:f.get("email1")},a.point("io.ox/core/person:action").each(function(a){_.call(a.action,b.data,b)})}});return"use strict",c})