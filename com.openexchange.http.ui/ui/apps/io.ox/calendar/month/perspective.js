define("io.ox/calendar/month/perspective",["io.ox/calendar/month/view","io.ox/calendar/api"],function(a,b){var c=new ox.ui.Perspective("month");return"use strict",_.extend(c,{scaffold:$(),drawMonth:function(c,d){var e=Date.UTC(c,d,1),f=Date.UTC(c,d+1,0),g=new Backbone.Collection([]),h=new a({collection:g,year:c,month:d});this.scaffold.find(".scrollpane").append(h.render().el),b.getAll({start:e,end:f}).done(function(a){g.reset(_(a).map(function(a){var b=new Backbone.Model(a);return b.id=_.cid(a),b
}))}),h.on("showAppoinment",function(a,c){b.get(c).done(function(b){require(["io.ox/core/tk/dialogs","io.ox/calendar/view-detail"]).done(function(c,d){(new c.SidePopup).show(a,function(a){a.append(d.draw(b))})})})})},scrollTop:function(a){return this.scaffold.find(".scrollpane").scrollTop(a)},render:function(){var b=!0;this.scaffold=a.drawScaffold(b),this.drawMonth(2012,4),this.drawMonth(2012,5),this.drawMonth(2012,6),this.main.empty().addClass("month-view").append(this.scaffold),this.scrollTop(this
.main.find(".month-2012-6").position().top)}}),c})