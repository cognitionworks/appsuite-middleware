define("io.ox/calendar/month/view",["io.ox/calendar/util","dot!io.ox/calendar/month/template.html","io.ox/core/date","gettext!io.ox/calendar/view","less!io.ox/calendar/month/style.css"],function(a,b,c){var d=Backbone.View.extend({className:"month",events:{"click .appointment":"onClickAppointment"},initialize:function(a){this.collection.on("reset",this.renderAppointments,this)},onClickAppointment:function(a){var b=_.cid($(a.currentTarget).attr("data-cid"));this.trigger("showAppoinment",a,b)},render
:function(){var d=this.options.year,e=this.options.month,f=a.getMonthScaffold(Date.UTC(d,e,1)),g=!1;return f.length===5&&this.$el.addClass("row5"),_(f).each(function(a){var c=$('<div class="week">').appendTo(this.el);_(a).each(function(a){(!g||!a.isWeekend)&&c.append(b.render("day",a))},this)},this),this.$el.addClass("month-"+d+"-"+(e+1)).append($('<div class="vertical-name">').text(c.locale.months[e]+" "+d)),this},renderAppointment:function(c){return b.render("appointment",{cid:_.cid(c),start:a.
getTime(c.start_date),subject:c.title,shownAs:a.getShownAsClass(c)})},renderAppointments:function(){this.collection.each(function(a){console.log("appointment",a,a.get("title"));var b=new Date(a.get("start_date")),c=".date-"+b.getUTCMonth()+"-"+b.getUTCDate()+" .list";this.$(c).append(this.renderAppointment(a.attributes))},this)}});return"use strict",d.drawScaffold=function(a){var d,e=c.locale.days;return e=e.slice(1).concat(e[0]),a===!1&&(e=e.slice(0,5)),d=b.render("scaffold",{days:e}),a===!1&&d.
addClass("hide-weekend"),d},d})