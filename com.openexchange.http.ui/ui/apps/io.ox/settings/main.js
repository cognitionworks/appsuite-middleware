define("io.ox/settings/main",["io.ox/core/tk/vgrid","io.ox/core/api/apps","io.ox/core/extensions","io.ox/core/tk/forms","io.ox/core/tk/view","less!io.ox/settings/style.css"],function(a,b,c,d){var e,f,g,h,i={main:{build:function(){var a;return this.addClass("application").append(a=$("<div>").addClass("title")),{title:a}},set:function(a,b,c){b.title.text(a.title)}},label:{build:function(){this.addClass("settings-label")},set:function(a,b,c){this.text(a.group||"")}},requiresLabel:function(a,b,c){return b
.group!==c?b.group:!1}},j=ox.ui.createApp({name:"io.ox/settings"}),k=330,l=!0,m=null;"use strict";function n(){var a=$(".expertmode");l?a.show():a.hide()}return j.setLauncher(function(){var o,p;j.setWindow(e=ox.ui.createWindow({title:"Settings",toolbar:!0,titleWidth:k+27+"px",name:"io.ox/settings"})),o=function(){var a=m.id+"/settings";c.point(a+"/detail").invoke("save")},e.on("hide",o),c.point("io.ox/settings/links/toolbar").extend({id:"io.ox/settings/expertcb",draw:function(){this.append(d.createCheckbox
({dataid:"settings-expertcb",initialValue:l,label:"Expertmode"}).on("update.model",function(a,b){l=b.value,n()}))}}),e.addClass("io-ox-settings-main"),g=$("<div/>").addClass("leftside border-right").css({width:k+"px",overflow:"auto"}).appendTo(e.nodes.main),h=$("<div/>").css({left:k+1+"px",overflow:"auto"}).addClass("rightside default-content-padding settings-detail-pane").appendTo(e.nodes.main),f=new a(g),f.setDeserialize(function(a){return a}),f.addTemplate(i.main),f.addLabelTemplate(i.label),f
.requiresLabel=i.requiresLabel,f.setAllRequest(function(){var a=_.filter(b.getInstalled(),function(a){return a.settings});return a.push({category:"Basic",company:"Open-Xchange",description:"Manage Accounts",icon:"",id:"io.ox/settings/accounts",settings:!0,title:"Accounts"}),console.log("listing apps"),console.log(a),$.Deferred().resolve(a)}),p=function(a){var b;b=a.id+"/settings",console.log("load:"+b),h.empty().busy(),require([b],function(d){console.log("extpoint:"+b+"/detail"),c.point(b+"/detail"
).invoke("draw",h,a),n(),h.idle()})},f.selection.on("change",function(a,b){var c;b.length===1?(c=m===null,c||o(),m=b[0],p(m)):h.empty()}),f.setMultiple(!1),e.on("show",function(){f.selection.keyboard(!0)}),e.on("hide",function(){f.selection.keyboard(!1)}),e.show(function(){f.paint()}),f.refresh()}),{getApp:j.getInstance}})