define("io.ox/contacts/actions",["io.ox/core/extensions","io.ox/core/extPatterns/links","gettext!io.ox/contacts/contacts"],function(a,b,c){var d,e=b.Action;"use strict",new e("io.ox/contacts/main/delete",{index:100,id:"delete",requires:"some delete",action:function(a){require(["io.ox/contacts/api","io.ox/core/tk/dialogs"],function(b,c){(new c.ModalDialog).text("Are you really sure about your decision? Are you aware of all consequences you have to live with?").addPrimaryButton("delete","Shut up and delete it!"
,"delete").addButton("cancel","No, rather not","cancel").show().done(function(c){c==="delete"&&b.remove(a)})})}}),new e("io.ox/contacts/main/update",{index:100,id:"edit",requires:"one modify",action:function(a){a.mark_as_distributionlist===!0?require(["io.ox/contacts/distrib/main"],function(b){b.getApp(a).launch().done(function(){this.edit(a)})}):require(["io.ox/contacts/util"],function(b){b.createEditPage(a)})}}),new e("io.ox/contacts/main/create",{index:100,id:"create",requires:"create",action:
function(a){require(["io.ox/contacts/create/main"],function(b){b.show(a).done(function(b){a.getGrid().selection.set(b)})})}}),new e("io.ox/contacts/main/distrib",{index:100,id:"create-dist",requires:function(a){return a.collection.has("create")},action:function(a){require(["io.ox/contacts/distrib/main"],function(b){b.getApp().launch().done(function(){this.create(a.folder.get())})})}}),d=function(a,b,d){return function(e){require(["io.ox/contacts/api","io.ox/core/tk/dialogs","io.ox/core/tk/folderviews"
],function(f,g,h){var i=(new g.ModalDialog({easyOut:!0})).header($("<h3>").text(d)).addPrimaryButton("ok",c("OK")).addButton("cancel",c("Cancel"));i.getBody().css("maxHeight","250px");var j=_(e).first(),k=new h.FolderTree(i.getBody(),{type:a});k.paint(),i.show(function(){k.selection.set({id:j.folder_id||j.folder})}).done(function(a){if(a==="ok"){var c=k.selection.get();c.length===1&&f[b](e,c[0].id)}k.destroy(),k=i=null})})}},new e("io.ox/contacts/main/move",{id:"move",requires:"some delete",multiple
:d("contacts","move",c("Move"))}),new e("io.ox/contacts/main/copy",{id:"copy",requires:"some read",multiple:d("contacts","copy",c("Copy"))}),a.point("io.ox/contacts/detail/actions").extend(new b.InlineLinks({index:100,id:"inline-links",ref:"io.ox/contacts/links/inline"})),a.point("io.ox/contacts/links/toolbar").extend(new b.Link({index:100,id:"create",label:c("Add contact"),ref:"io.ox/contacts/main/create"})),a.point("io.ox/contacts/links/toolbar").extend(new b.Link({index:100,id:"create-dist",label
:c("Add distribution list"),ref:"io.ox/contacts/main/distrib"})),a.point("io.ox/contacts/links/inline").extend(new b.Link({index:100,prio:"hi",id:"update",label:c("Edit"),ref:"io.ox/contacts/main/update"})),a.point("io.ox/contacts/links/inline").extend(new b.Link({index:200,id:"move",label:c("Move"),ref:"io.ox/contacts/main/move"})),a.point("io.ox/contacts/links/inline").extend(new b.Link({index:300,id:"copy",label:c("Copy"),ref:"io.ox/contacts/main/copy"})),a.point("io.ox/contacts/links/inline")
.extend(new b.Link({index:400,prio:"hi",id:"delete",label:c("Delete"),ref:"io.ox/contacts/main/delete",special:"danger"}))})