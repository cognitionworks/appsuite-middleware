define("io.ox/contacts/edit/test",["io.ox/core/extensions","io.ox/contacts/main","io.ox/contacts/api","io.ox/core/config","io.ox/core/date"],function(a,b,c,d,e){var f,g,h={first_name:"Georg",last_name:"Tester",email1:"tester@test.de",cellular_telephone1:"0815123456789"},i={first_name:"Georg",last_name:"Tester",company:"OX",department:"OX-dev",position:"small cog in a big wheel",profession:"developer",street_business:"Martinstr. 41",postal_code_business:"57462",city_business:"Olpe",sales_volume:"10000"
,suffix:"Sir",title:"Dr.",street_home:"Goethe-Ring 2",postal_code_home:"10333",city_home:"Olpe",state_home:"NRW",country_home:"Germany",birthday:"10.10.1915",marital_status:"married",number_of_children:"2",nickname:"GG",spouse_name:"Johanna",anniversary:"11.10.1980",note:"Much Ado about Nothing",employee_type:"free",room_number:"4711",state_business:"NRW",country_business:"Olpe",number_of_employees:"50",tax_id:"23-2322-23",commercial_register:"123123123",branches:"IT",business_category:"nothing",
info:"realy nothing",manager_name:"Barney Stinson",assistant_name:"Ted Mosby",street_other:"Elm street",city_other:"Some",postal_code_other:"33333",state_other:"New York",country_other:"USA",telephone_business1:"+49 2761-8385-0",telephone_business2:"0815-4711",fax_business:"0815-4711",telephone_callback:"0815-4711",telephone_car:"0815-4711",telephone_company:"0815-4711",telephone_home1:"0815-4711",telephone_home2:"0815-4711",fax_home:"0815-4711",cellular_telephone1:"0815-4711",cellular_telephone2
:"0815-4711",telephone_other:"0815-4711",fax_other:"0815-4711",email1:"test@test-ox.de",email2:"test@test-ox.de",email3:"test@test-ox.de",url:"http://www.test-ox.de",telephone_isdn:"0815-4711",telephone_pager:"0815-4711",telephone_primary:"0815-4711",telephone_radio:"0815-4711",telephone_telex:"0815-4711",telephone_ttytdd:"0815-4711",instant_messenger1:"0815-4711",instant_messenger2:"0815-4711",telephone_ip:"0815-4711",telephone_assistant:"0815-4711",userfield01:"userfield",userfield02:"userfield"
,userfield03:"userfield",userfield04:"userfield",userfield05:"userfield",userfield06:"userfield",userfield07:"userfield",userfield08:"userfield",userfield09:"userfield",userfield10:"userfield",userfield11:"userfield",userfield12:"userfield",userfield13:"userfield",userfield14:"userfield",userfield15:"userfield",userfield16:"userfield",userfield17:"userfield",userfield18:"userfield",userfield19:"userfield",userfield20:"userfield"},j=5e3;"use strict";function k(){var a=function(){return a.value};return a
.value=!1,a.yep=function(){a.value=!0},a}f=d.get("folder.contacts"),h.folder_id=f,g={createSimpleContact:function(a){c.create(h).done(function(b){a(b)})}},a.point("test/suite").extend({id:"contacts-edit",index:100,test:function(a){a.describe("Contact edit",function(){var d,h,l,m,n,o,p,q,r,s,t,u=null,v=null;a.it("opens contact app ",function(){var c=new k;a.waitsFor(c,"Could not load app",j),b.getApp().launch().done(function(){u=this,u.folder.setDefault().done(function(){c.yep(),a.expect(u).toBeTruthy
()})})}),a.it("creates a fresh obj",function(){a.runs(function(){var b=this;b.ready=!1,g.createSimpleContact(function(a){a&&(b.ready=!0,b.obj=a)}),a.waitsFor(function(){return this.ready},"it happens",j),a.runs(function(){d=this.obj,a.expect(d).toBeTruthy()})})}),a.it("catches the form and autofills / checks for alert div",function(){var b,c,e=u.getGrid();t=f+"."+d.id,a.waitsFor(function(){if(e.contains(t))return e.selection.set({folder_id:f,id:d.id}),!0;else return!1},"looks for the listed item"
,j),a.waitsFor(function(){m=$('table[data-obj-id="'+t+'"] .io-ox-inline-links a[data-action="update"]');if(m[0])return!0},"looks for update button",j),a.runs(function(){m.trigger("click")}),a.waitsFor(function(){v=$('.contact-detail.edit[data-property="'+t+'"]');if(v[0])return!0},"the form",j),a.waitsFor(function(){b=v.find('[data-property="email1"]');if(b[0])return!0}),a.runs(function(){b.val("wrong_mail").trigger("change")}),a.waitsFor(function(){c=v.find(".jGrowl-notification");if(c[0])return!0
}),a.runs(function(){c.find(".jGrowl-close").trigger("click")}),a.waitsFor(function(){n=v.find('.btn.btn-primary[data-action="save"]');if(n[0])return!0}),a.runs(function(){_.each(i,function(a,b){v.find('[data-property="'+b+'"]').val(a).trigger("change")}),a.expect(n).toBeTruthy(),n.trigger("click")})}),a.it("loads the saved item and compares incl. autogenerated displayname",function(){a.runs(function(){var b=this;b.ready=!1,c.on("edit",function(a,c){c&&(q=c.id,r=c.folder,b.ready=!0)}),a.waitsFor(
function(){return this.ready},"catches the id",j)}),a.runs(function(){c.get({id:q,folder_id:r}).done(function(a){s=a}),a.waitsFor(function(){if(s)return!0},"looks for the object",j),a.runs(function(){a.expect(s.first_name).toEqual(i.first_name),a.expect(s.last_name).toEqual(i.last_name),a.expect(s.display_name).toEqual("Tester, Georg"),a.expect(s.company).toEqual(i.company),a.expect(s.department).toEqual(i.department),a.expect(s.position).toEqual(i.position),a.expect(s.profession).toEqual(i.profession
),a.expect(s.street_business).toEqual(i.street_business),a.expect(s.postal_code_business).toEqual(i.postal_code_business),a.expect(s.city_business).toEqual(i.city_business),a.expect(s.telephone_business1).toEqual(i.telephone_business1),a.expect(s.sales_volume).toEqual(i.sales_volume),a.expect(s.suffix).toEqual(i.suffix),a.expect(s.title).toEqual(i.title),a.expect(s.street_home).toEqual(i.street_home),a.expect(s.postal_code_home).toEqual(i.postal_code_home),a.expect(s.city_home).toEqual(i.city_home
),a.expect(s.state_home).toEqual(i.state_home),a.expect(s.country_home).toEqual(i.country_home),a.expect(e.Local(e.Local.utc(s.birthday)).format("dd.MM.YYYY")).toEqual(i.birthday),a.expect(s.marital_status).toEqual(i.marital_status),a.expect(s.number_of_children).toEqual(i.number_of_children),a.expect(s.nickname).toEqual(i.nickname),a.expect(s.spouse_name).toEqual(i.spouse_name),a.expect(e.Local(e.Local.utc(s.anniversary)).format("dd.MM.YYYY")).toEqual(i.anniversary),a.expect(s.note).toEqual(i.note
),a.expect(s.employee_type).toEqual(i.employee_type),a.expect(s.room_number).toEqual(i.room_number),a.expect(s.state_business).toEqual(i.state_business),a.expect(s.country_business).toEqual(i.country_business),a.expect(s.number_of_employees).toEqual(i.number_of_employees),a.expect(s.tax_id).toEqual(i.tax_id),a.expect(s.commercial_register).toEqual(i.commercial_register),a.expect(s.branches).toEqual(i.branches),a.expect(s.info).toEqual(i.info),a.expect(s.manager_name).toEqual(i.manager_name),a.expect
(s.assistant_name).toEqual(i.assistant_name),a.expect(s.street_other).toEqual(i.street_other),a.expect(s.city_other).toEqual(i.city_other),a.expect(s.postal_code_other).toEqual(i.postal_code_other),a.expect(s.country_other).toEqual(i.country_other),a.expect(s.telephone_business2).toEqual(i.telephone_business2),a.expect(s.fax_business).toEqual(i.fax_business),a.expect(s.telephone_callback).toEqual(i.telephone_callback),a.expect(s.telephone_car).toEqual(i.telephone_car),a.expect(s.telephone_company
).toEqual(i.telephone_company),a.expect(s.telephone_home1).toEqual(i.telephone_home1),a.expect(s.telephone_home2).toEqual(i.telephone_home2),a.expect(s.fax_home).toEqual(i.fax_home),a.expect(s.cellular_telephone1).toEqual(i.cellular_telephone1),a.expect(s.cellular_telephone2).toEqual(i.cellular_telephone2),a.expect(s.telephone_other).toEqual(i.telephone_other),a.expect(s.fax_other).toEqual(i.fax_other),a.expect(s.email1).toEqual(i.email1),a.expect(s.email2).toEqual(i.email2),a.expect(s.email3).toEqual
(i.email3),a.expect(s.url).toEqual(i.url),a.expect(s.telephone_isdn).toEqual(i.telephone_isdn),a.expect(s.telephone_pager).toEqual(i.telephone_pager),a.expect(s.telephone_primary).toEqual(i.telephone_primary),a.expect(s.telephone_radio).toEqual(i.telephone_radio),a.expect(s.telephone_telex).toEqual(i.telephone_telex),a.expect(s.telephone_ttytdd).toEqual(i.telephone_ttytdd),a.expect(s.instant_messenger1).toEqual(i.instant_messenger1),a.expect(s.instant_messenger2).toEqual(i.instant_messenger2),a.expect
(s.telephone_ip).toEqual(i.telephone_ip),a.expect(s.telephone_assistant).toEqual(i.telephone_assistant),a.expect(s.userfield01).toEqual(i.userfield01),a.expect(s.userfield02).toEqual(i.userfield02),a.expect(s.userfield03).toEqual(i.userfield03),a.expect(s.userfield04).toEqual(i.userfield04),a.expect(s.userfield05).toEqual(i.userfield05),a.expect(s.userfield06).toEqual(i.userfield06),a.expect(s.userfield07).toEqual(i.userfield07),a.expect(s.userfield08).toEqual(i.userfield08),a.expect(s.userfield09
).toEqual(i.userfield09),a.expect(s.userfield10).toEqual(i.userfield10),a.expect(s.userfield11).toEqual(i.userfield11),a.expect(s.userfield12).toEqual(i.userfield12),a.expect(s.userfield13).toEqual(i.userfield13),a.expect(s.userfield14).toEqual(i.userfield14),a.expect(s.userfield15).toEqual(i.userfield15),a.expect(s.userfield16).toEqual(i.userfield16),a.expect(s.userfield17).toEqual(i.userfield17),a.expect(s.userfield18).toEqual(i.userfield18),a.expect(s.userfield19).toEqual(i.userfield19),a.expect
(s.userfield20).toEqual(i.userfield20),a.expect(s.state_other).toEqual(i.state_other)})})}),a.it("opens contact app ",function(){var c=new k;a.waitsFor(c,"Could not load app",j),b.getApp().launch().done(function(){u=this,c.yep(),a.expect(u).toBeTruthy()})}),a.it("looks for the edited item / selects and deletes",function(){var b=u.getGrid();t=r+"."+q,a.waitsFor(function(){if(b.contains(t))return b.selection.set({folder_id:r,id:q}),!0;else return!1},"looks for the list",j),a.waitsFor(function(){o=$
('table.view[data-obj-id="'+t+'"] .io-ox-inline-links a[data-action="delete"]');if(o[0])return!0},"looks for delete button",j),a.runs(function(){o.trigger("click")}),a.waitsFor(function(){p=$('.io-ox-dialog-popup .btn[data-action="delete"]');if(p[0])return!0},"delete dialog to be there",j),a.runs(function(){a.expect(p).toBeTruthy(),p.trigger("click"),u=d=h=l=m=n=null,o=p=v=null,q=r=s=t=null})})})}}),a.point("test/suite").extend({id:"contacts-extpoint",index:100,test:function(c){c.describe("Contact extpoint"
,function(){var d,e,h,i,l,m,n,o,p,q=null,r=null;c.it("opens contact app ",function(){var a=new k;c.waitsFor(a,"Could not load app",j),b.getApp().launch().done(function(){q=this,q.folder.setDefault().done(function(){a.yep(),c.expect(q).toBeTruthy()})})}),c.it("creates a fresh obj",function(){c.runs(function(){var a=this;a.ready=!1,g.createSimpleContact(function(b){b&&(a.ready=!0,a.obj=b)}),c.waitsFor(function(){return this.ready},"it happens",j),c.runs(function(){d=this.obj,c.expect(d).toBeTruthy(
)})})}),c.it("catches the form and checks for testfield",function(){var a=q.getGrid();p=f+"."+d.id,c.waitsFor(function(){if(a.contains(p))return a.selection.set({folder_id:f,id:d.id}),!0;else return!1},"looks for the listed item",j),c.waitsFor(function(){e=$('table[data-obj-id="'+p+'"] .io-ox-inline-links a[data-action="update"]');if(e[0])return!0},"looks for update button",j),c.runs(function(){e.triggerHandler("click")}),c.waitsFor(function(){r=$('.contact-detail.edit[data-property="'+p+'"]'),m=
r.find('input[data-property="cellular_telephone1"]');if(m[0])return!0},"the form",j),c.waitsFor(function(){r=$('.contact-detail.edit[data-property="'+p+'"]'),h=$(".window-controls .window-control").text("x");if(h[1])return!0},"waits for the form",j),c.runs(function(){$(h[1]).trigger("click")})}),c.it("opens contact app ",function(){var a=new k;c.waitsFor(a,"Could not load app",j),b.getApp().launch().done(function(){q=this,a.yep(),c.expect(q).toBeTruthy()})}),c.it("looks for the created item / selects and deletes"
,function(){var a=q.getGrid();c.waitsFor(function(){if(a.contains(p))return a.selection.set({folder_id:o,id:n}),!0;else return!1},"looks for the list",j),c.waitsFor(function(){i=$('table.view[data-obj-id="'+p+'"] .io-ox-inline-links a[data-action="delete"]');if(i[0])return!0},"looks for delete button",j),c.runs(function(){i.trigger("click")}),c.waitsFor(function(){l=$('.io-ox-dialog-popup .btn[data-action="delete"]');if(l[0])return!0},"delete dialog to be there",j),c.runs(function(){l.trigger("click"
)})}),c.it("opens contact app ",function(){var a=new k;c.waitsFor(a,"Could not load app",j),b.getApp().launch().done(function(){q=this,q.folder.setDefault().done(function(){a.yep(),c.expect(q).toBeTruthy()})})}),c.it("creates a fresh obj",function(){c.runs(function(){var a=this;a.ready=!1,g.createSimpleContact(function(b){b&&(a.ready=!0,a.obj=b)}),c.waitsFor(function(){return this.ready},"it happens",j),c.runs(function(){d=this.obj,c.expect(d).toBeTruthy()})})}),c.it("catches the form and checks for absence of testfield"
,function(){var b;q.launch(),c.runs(function(){a.point("io.ox/contacts/edit/form/phone").disable("cellular_telephone1")}),b=q.getGrid(),p=f+"."+d.id,c.waitsFor(function(){if(b.contains(p))return b.selection.set({folder_id:f,id:d.id}),!0;else return!1},"looks for the listed item",j),c.waitsFor(function(){e=$('table[data-obj-id="'+p+'"] .io-ox-inline-links a[data-action="update"]');if(e[0])return!0},"looks for update button",j),c.runs(function(){e.triggerHandler("click")}),c.waitsFor(function(){r=$
('.contact-detail.edit[data-property="'+p+'"]');if(r[0])return!0},"the form",j),c.runs(function(){m=$('input[data-property="cellular_telephone1"]'),c.expect(m[0]).toBeFalsy()})}),c.runs(function(){h=$(".window-controls .window-control").text("x"),$(h[1]).trigger("click")}),c.it("looks for the created item / selects and deletes",function(){var a=q.getGrid();q.launch(),c.waitsFor(function(){if(a.contains(p))return a.selection.set({folder_id:o,id:n}),!0;else return!1},"looks for the list",j),c.waitsFor
(function(){i=$('table.view[data-obj-id="'+p+'"] .io-ox-inline-links a[data-action="delete"]');if(i[0])return!0},"looks for delete button",j),c.runs(function(){i.trigger("click")}),c.waitsFor(function(){l=$('.io-ox-dialog-popup .btn[data-action="delete"]');if(l[0])return!0},"delete dialog to be there",j),c.runs(function(){l.trigger("click")})})})}})})