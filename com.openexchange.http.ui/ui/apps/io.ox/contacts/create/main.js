define("io.ox/contacts/create/main",["io.ox/contacts/api","io.ox/contacts/model","io.ox/contacts/create/view"],function(a,b,c){var d;"use strict";function e(a){return a&&a.files&&a.files[0]?a.files[0]:void 0}return d=function(d){var f=new b,g=new c.View({model:f}),h=c.getPopup(g),i=$.Deferred();return f.store=function(b){b.folder_id=d.folder.get();var c=g.node.find('input[name="picture-upload-file"][type="file"]').get(0);return a.create(b,e(c))},f.on("save:done",function(a,b){i.resolve(b)}),h.on("save"
,{model:f},function(a){a.data.model.save().done(this.close).fail(this.idle)}).show(),i},{show:d}})