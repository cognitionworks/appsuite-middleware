define("plugins/halo/mail/register",["io.ox/core/extensions","gettext!plugins/halo/mail"],function(a,b){"use strict",a.point("io.ox/halo/contact:renderer").extend({id:"mail",handles:function(a){return a==="com.openexchange.halo.mail"},draw:function(a,c,d){var e,f,g=$.Deferred();if(d.length===0)return g.resolve(),g;return e=[],f=[],_.each(d,function(a){a.folder_id.match(/INBOX$/i)?f.push(a):e.push(a)}),a.append($("<div>").addClass("widget-title clear-title").text(b("Recent conversations"))),require
(["io.ox/core/tk/dialogs","io.ox/mail/view-grid-template","io.ox/mail/api"],function(c,d,h){var i,j=$("<div>").addClass("io-ox-left-column");j.append($("<p>").text(b("Received mails")).addClass("io-ox-subheader")),f.length===0?j.append($("<div>").text(b("Cannot find any messages this contact sent to you."))):j.append(d.drawSimpleGrid(f)),a.append(j),i=$("<div>").addClass("io-ox-right-column"),i.append($("<p>").text(b("Sent mails")).addClass("io-ox-subheader")),e.length===0?i.append($("<div>").text
(b("Cannot find any messages you sent to this contact."))):i.append(d.drawSimpleGrid(e)),a.append(i),a.append($("<div>").css("clear","both")),(new c.SidePopup).delegate(a,".vgrid-cell",function(a){var b=$(this).data("objectData");a.parent().removeClass("default-content-padding"),h.get({folder:b.folder_id,id:b.id}).done(function(b){require(["io.ox/mail/view-detail"],function(c){a.append(c.draw(b).removeClass("page")),b=null})})}),g.resolve()}),g}}),a.point("io.ox/halo/contact:requestEnhancement").
extend({id:"request-mail",enhances:function(a){return a==="com.openexchange.halo.mail"},enhance:function(a){a.appendColumns=!0,a.columnModule="mail",a.params.limit=10,a.params.columns="102,600,601,602,603,604,605,606,607,608,609,610,611,612,614,652"}})})