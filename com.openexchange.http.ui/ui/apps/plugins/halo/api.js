define.async("plugins/halo/api",["io.ox/core/http","io.ox/core/config","plugins/halo/config","io.ox/core/extensions"],function(a,b,c,d){var e,f,g=[];"use strict";function h(b){var c=b.providerFilter||{filterProviders:function(a){return a}},e=d.point("io.ox/halo/contact:requestEnhancement");this.investigate=function(b){var d={},f=c.filterProviders(g);return _(f).each(function(c){var f={module:"halo/contact",params:{action:"investigate",provider:c},appendColumns:!1,contact:b};e.each(function(a){var b
;if(!a.enhances(c))return;b=a.enhance(f,c),b&&(f=b)}),b=f.contact,delete f.contact,f.data=b,d[c]=a.PUT(f)}),d}}function i(){var a=d.point("io.ox/halo/contact:renderer");this.filterProviders=function(b){var c=[];return _(b).each(function(b){a.each(function(a){a.handles(b)&&c.push(b)})}),c},this.draw=function(b,c,d){var e;return b=$(b),e=[],a.each(function(a){var f;a.handles(c)&&(f=a.draw(b,c,d),f&&e.push(f))}),$.when.apply($,e)}}return f=new i,e={halo:new h({providerFilter:f}),viewer:f},a.GET({module
:"halo/contact",params:{action:"services"}}).pipe(function(a){var d;return a=_(a).without("com.openexchange.halo.contacts"),a.unshift("com.openexchange.halo.contacts"),d=b.get("ui.halo.providers"),g=c.interpret(d,a),e})})