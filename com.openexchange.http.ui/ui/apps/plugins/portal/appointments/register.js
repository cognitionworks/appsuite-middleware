define("plugins/portal/appointments/register",["io.ox/core/extensions"],function(a){var b={id:"appointments",index:100,load:function(){var a=new $.Deferred;return require(["io.ox/calendar/api"],function(b){b.getAll().done(function(c){b.getList(c.slice(0,10)).done(a.resolve).fail(a.reject)}).fail(a.reject)}),a},draw:function(a){var b=new $.Deferred,c=this;return c.addClass("io-ox-portal-appointments").append($("<div/>").addClass("clear-title").text("Appointments")),a.length===0?(c.append("<div><b>You don't have any appointments in the near future. Go take a walk!</b></div>"
),b.resolve()):require(["io.ox/core/tk/dialogs","io.ox/calendar/view-grid-template"],function(d,e){e.drawSimpleGrid(a).appendTo(c),(new d.SidePopup).delegate(c,".vgrid-cell",function(a){var b=$(this).data("appointment");require(["io.ox/calendar/view-detail"],function(c){a.append(c.draw(b)),b=null})}),b.resolve()}),b},post:function(a){var b=this;require(["io.ox/calendar/api"],function(c){c.on("refresh.all",function(){a.load().done(_.bind(a.draw,b))})})}};"use strict",a.point("io.ox/portal/widget")
.extend(b)})