(function(a){var b,c,d=[],e=window;a.fn.tinymce=function(b){var g,h,i,j,k=this,l="",m="";if(!k.length)return k;if(!b)return tinyMCE.get(k[0].id);k.css("visibility","hidden");function n(){var c=[],d=0;f&&(f(),f=null),k.each(function(a,e){var f,g=e.id,h=b.oninit;g||(e.id=g=tinymce.DOM.uniqueId()),f=new tinymce.Editor(g,b),c.push(f),f.onInit.add(function(){var a,b=h;k.css("visibility",""),h&&++d==c.length&&(tinymce.is(b,"string")&&(a=b.indexOf(".")===-1?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=
tinymce.resolve(b)),b.apply(a||tinymce,c))})}),a.each(c,function(a,b){b.render()})}return!e.tinymce&&!c&&(g=b.script_url)?(c=1,h=g.substring(0,g.lastIndexOf("/")),/_(src|dev)\.js/g.test(g)&&(m="_src"),i=g.lastIndexOf("?"),i!=-1&&(l=g.substring(i+1)),e.tinyMCEPreInit=e.tinyMCEPreInit||{base:h,suffix:m,query:l},g.indexOf("gzip")!=-1&&(j=b.language||"en",g=g+(/\?/.test(g)?"&":"?")+"js=true&core=true&suffix="+escape(m)+"&themes="+escape(b.theme)+"&plugins="+escape(b.plugins)+"&languages="+j,e.tinyMCE_GZ||
(tinyMCE_GZ={start:function(){tinymce.suffix=m;function c(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}c("langs/"+j+".js"),c("themes/"+b.theme+"/editor_template"+m+".js"),c("themes/"+b.theme+"/langs/"+j+".js"),a.each(b.plugins.split(","),function(a,b){b&&(c("plugins/"+b+"/editor_plugin"+m+".js"),c("plugins/"+b+"/langs/"+j+".js"))})},end:function(){}})),a.ajax({type:"GET",url:g,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,c=2,b.script_loaded&&b.script_loaded
(),n(),a.each(d,function(a,b){b()})}})):c===1?d.push(n):n(),k},a.extend(a.expr[":"],{tinymce:function(a){return a.id&&!!tinyMCE.get(a.id)}});function f(){var c;function d(a){a==="remove"&&this.each(function(a,b){var c=g(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function f(a){var c,e=this;if(a!==b)d.call(e),e.each(function(b,c){var d;(d=tinyMCE.get(c.id))&&d.setContent(a)});else if(e.length>0)if(c=
tinyMCE.get(e[0].id))return c.getContent()}function g(a){var b=null;return a&&a.id&&e.tinymce&&(b=tinyMCE.get(a.id)),b}function h(a){return!!(a&&a.length&&e.tinymce&&a.is(":tinymce"))}c={},a.each(["text","html","val"],function(d,e){var i=c[e]=a.fn[e],l=e==="text";a.fn[e]=function(c){var d,e,j=this;if(!h(j))return i.apply(j,arguments);if(c!==b)return f.call(j.filter(":tinymce"),c),i.apply(j.not(":tinymce"),arguments),j;else return d="",e=arguments,(l?j:j.eq(0)).each(function(b,c){var f=g(c);d+=f?l?
f.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):f.getContent():i.apply(a(c),e)}),d}}),a.each(["append","prepend"],function(d,e){var f=c[e]=a.fn[e],i=e==="prepend";a.fn[e]=function(a){var c=this;if(!h(c))return f.apply(c,arguments);if(a!==b)return c.filter(":tinymce").each(function(b,c){var d=g(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),f.apply(c.not(":tinymce"),arguments),c}}),a.each(["remove","replaceWith","replaceAll","empty"],function(b,e){var f=c[e]=a.fn[e];a.fn[e]=
function(){return d.call(this,e),f.apply(this,arguments)}}),c.attr=a.fn.attr,a.fn.attr=function(d,e){var i,l,m=this;if(!d||d!=="value"||!h(m))return c.attr.apply(m,arguments);if(e!==b)return f.call(m.filter(":tinymce"),e),c.attr.apply(m.not(":tinymce"),arguments),m;else return i=m[0],l=g(i),l?l.getContent():c.attr.apply(a(i),arguments)}}})(jQuery)