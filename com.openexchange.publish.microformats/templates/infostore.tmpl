<#macro render key value title>
	<#if value != "">
		<tr>
			<td class="key">${title}:</td> 
			<td class="${key} value">${value?html}</td>
		</tr>
	</#if>
</#macro>

<#macro render_scalar key value title>
		<tr>
			<td class="key">${title}:</td> 
			<td class="${key} value">${value?html}</td>
		</tr>
</#macro>

<#macro fileMicroformatted infoitem>
		<a class="ox_file" href="${request.scheme!"http"}://${request.serverName}${utils.getFileURL(publication, infoitem)}"  >Download</a>
</#macro>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
<head>
	<title>OX PubSub</title>
	<style type="text/css">
	<!--
	html, body {
		margin: 0;
		padding: 0;
		border: none;
		height: 100%;
		width: 100%;
		background: #e1e4eb;
	}

	html * {
		font-family: Helvetica, Arial, sans-serif;
		color: #000;
	}
	#nav {
		float:left;
		width: 20%;
	}
	#infostore {
		float: left;
		width: 70%;
	}
	td.key {
		width: 25%;
		text-align: right;
		padding-right: 1em;
	}
	table.an_infoitem, td.value {
		width: 100%;
	}
	td.value, td.value span {
		color: #446;
		font-weight: bold;
		text-align: left;
	}
	.ox_infoitem{
		clear: both;
	}
	#nav, .ox_infoitem {
		margin: .5em;
		border: 1px solid #999;
		background: #fff;
		padding: .5em;
	}
	#nav a, #nav a:visited, #nav a:hover, #nav a:link {
		font-weight: bold;
	}
	a, a:visited, a:hover, a:link {
		text-decoration: none;
		color: #446;
	}
	#nav li, #nav ul {
		list-style-type: none; 
		margin: 0;
		padding: 0;
		left-indent: 0;
	}
	.back {
		text-align: center;
		font-size: 75%;
		text-decoration none;
		color: #446;
	}
	.ox_image{
		float:right;
	}
	.message {
		margin-top: 2em;
		text-align: center;
	}

	-->
	</style>
</head>

<body>
	<#if (infostore?size == 0)>
		<div class="message">Folder is empty</div>
	</#if>

	<div id="infostore">
		<#list infostore as infoitem>
		<div class="ox_infoitem" id="infoitem_${infostore?seq_index_of(infoitem)}">
			<table class="an_infoitem">
				<@render key="ox_title" title="Title" value=infoitem.title!"" />
				<@render key="ox_url" title="URL" value=infoitem.URL!"" />
				<@render_scalar key="ox_version" title="Version" value=infoitem.version!"" />
				<@render key="ox_creationDate" title="Creation Date" value=timeFormat.format(infoitem.creationDate) />
				<@render key="ox_lastModified" title="Last Modified" value=timeFormat.format(infoitem.lastModified) />
				<@render key="ox_tags" title="Tags" value=infoitem.categories!"" />
				<@render key="ox_comment" title="Comment" value=infoitem.description!"" />
				<#if infoitem.fileName??>
					<@render key="ox_fileName" title="File Name" value=infoitem.fileName!"" />
					<@render_scalar key="ox_fileSize" title="File Size" value=infoitem.fileSize!"" />
					<@render key="ox_MIMEType" title="MIME Type" value=infoitem.fileMIMEType!"" />
					<tr>
						<td></td>
						<td>
						<@fileMicroformatted infoitem/>
						</td>
					</tr>
				</#if>				
			</table>
	 	<div class="back"><a href="#nav">Back to the top</a></div>
		</div>
		</#list>
	</div>
</body>
</html>