<?xml version="1.0" encoding="UTF-8"?>
<project name="com.openexchange.i18n overrides" basedir=".">

    <description>
        Installs the localization files.
    </description>

    <!-- Constants -->
    <property name="i18nDir" value="${prefix}/i18n"/>
    <property name="languages" value="cs_CZ,de_DE,en_GB,es_ES,fr_CA,fr_FR,hu_HU,it_IT,ja_JP,lv_LV,nl_NL,pl_PL,ro_RO,ru_RU,sk_SK,th_TH,zh_CN,zh_TW"/>
    <property name="community_languages" value="ca_ES,da_DK,el_GR,eu_ES,gl_ES,he_HE,hi_IN,ko_KO,no_NB,pt_BR,pt_PT,sv_SV,tr_TR,vi_VI"/>

    <import file="build-project.xml"/>

    <target name="installConf">
        <copy todir="${destDir}/${confInstallDir}">
            <fileset dir="${confDir}">
                <include name="**/${language}.properties"/>
            </fileset>
        </copy>
    </target>

    <target name="postInstall" description="Installs the language files.">
        <antcall target="installLanguage"/>
    </target>

    <!-- This target is only for easier installation of all languages. Packaging only needs the installLanguage target. -->
    <target name="installLanguages">
        <foreach list="${languages}" target="installLanguage" param="language" inheritAll="true"/>
        <foreach list="${community_languages}" target="installLanguage" param="language" inheritAll="true"/>
    </target>

    <target name="installLanguage">
        <mkdir dir="${destDir}/${i18nDir}"/>
        <copy todir="${destDir}/${i18nDir}">
            <fileset dir="${basedir}">
                <include name="backend.${language}.po"/>
            </fileset>
        </copy>
    </target>

</project>
